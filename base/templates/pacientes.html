{% extends 'main.html' %}

{% block content %}


<div class="container-fluid">
    <div class="row">
        <div class="col-md">

            <div class="card card-body">
        
                <h5>Paciente: {{pacientes.nome}}</h5>

                <hr>
                <a class="btn btn-outline-info btn-sm btn-block" href="{% url 'att-paciente' pacientes.nome %}">Atualizar Paciente</a>
                <a class="btn btn-outline-danger btn-sm btn-block" href="{% url 'marcar-consulta' pacientes.nome %}">Marcar Consulta</a>
            </div>
        </div>

        <div class="col-md">
            <div class="card card-body">
                <h5>Informações de contato</h5>
                <hr>
                <p>CPF: {{pacientes.cpf_formatado}} </p>
                <p>Email: {{pacientes.email}} </p>
                <p>Telefone: {{pacientes.telefone_formatado}}</p>
            </div>
        </div>

        <div class="col-md">
            <div class="card card-body">
                <h5>Total de Consultas</h5>
                <hr>
                <h1 style="text-align: center; padding: 10px;">{{total_consultas}}</h1>
            </div>
        </div>
    </div>

    <br>
    <div class="row">
        <div class="col">
            <div class="card card-body">
                <form method="GET">

                    <button class="btn btn-primary" type="submit">Procurar</button>
                </form>
            </div>
        </div>
    </div>

    <br>
    <div class="row">
        <div class="col-md">
            <div class="card card-body">
                <table class="table table-sm">
                    <tr>
                        <th>Medico</th>
                        <th>Especialidade</th>
                        <th>Data da Consulta</th>
                        <th>Horário</th>
                        <th>Status</th>
                        <th>Atualizar</th>
                        <th>Remover</th>
                    </tr>

                    {% for consulta in consultas %}
                    <tr>
                    <td>{{consulta.medico}}</td>
                    <td>{{consulta.medico.especialidade}}</td>
                    <td>{{consulta.dia|date:"d/m/Y"|default:'---'}}</td>
                    <td>{{consulta.hora|time:"H:i:s"|default:'---'}}</td>
                    <td>{{consulta.status}}</td>
                    <td><a class="btn btn-sm btn-info" href="{% url 'att-consulta' consulta.id %}">Atualizar</a></td>
                        <td><a class="btn btn-sm btn-danger" href="{% url 'remover-consulta' consulta.id %}">Remover</a></td>  
                    </tr>
                    {% endfor %}

                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}